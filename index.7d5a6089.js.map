{"mappings":"mkBAAA,IAAAA,EAAAC,EAAA,S,sDAKMC,EAAO,CACXC,WAAYC,SAASC,cAAc,sBACnCC,SAAUF,SAASC,cAAc,sBACjCE,iBAAkBH,SAASC,cAAc,uBACzCG,UAAWJ,SAASC,cAAc,+BAkBpC,SAASI,EAAmBC,GAC1BR,EAAKI,SAASK,UAAUC,OAAO,aAC/BV,EAAKM,UAAUG,UAAUC,OAAO,aAChCR,SAASS,KAAKC,MAAMC,SAAW,SAC/BX,SAASY,iBAAiB,UAAWC,GACrCb,SAASY,iBAAiB,QAASE,GACnC,IAAMC,EAAST,EAAMU,OAAOC,QAAQC,GAC1BH,E,SAsBgBA,GAAbI,EAAYC,MAAAC,KAAAC,U,CArBzBC,CAAaR,GACbS,QAAQC,IAAIV,E,CAGd,SAASW,EAAiBC,GACxB,IAAMT,EAAKS,EAAKT,GACVU,EAAgBD,EAAKE,QAAQC,MACjC,SAAAC,G,MAA4B,qBAAjBA,EAAQC,I,IAErBR,QAAQC,IAAIG,GACZJ,QAAQC,IAAIE,EAAKT,IACjB,IAAMe,EAAaL,EAAcM,IACjCV,QAAQC,IAAIQ,GACZ,IAAME,EAAM,iCAA4CC,OAAXH,GAC7C,GAAIf,EAEF,OADAM,QAAQC,IAAIP,GACL,yCAA6CkB,OAAJD,EAAI,+C,UAKzChB,I,OAAAA,EAAfkB,EAAAzC,EAAA,CAAAyC,EAAAC,GAAAC,MAAA,SAAAC,EAA4BzB,G,IACpB0B,E,yEAAAA,GAAO,EAAAC,EAAAC,eAAc5B,GAC3BS,QAAQC,IAAIV,EAAS,gBACrBS,QAAQC,IAAIgB,EAAO,Q,kBACZA,EACJG,MAAK,SAAAjB,GAIJ,OAHAkB,cAAgBnB,EAAiBC,GACjC7B,EAAKK,iBAAiB2C,UAAYD,cAClCrB,QAAQC,IAAIE,GACLA,C,IAERoB,OAAM,SAAAC,GACLxB,QAAQC,IAAIuB,GACZlD,EAAKK,iBAAiB2C,UAAa,oG,iDAbd1B,MAAAC,KAAAC,U,CAkB3B,SAAS2B,EAAoB3C,GAC3BR,EAAKI,SAASK,UAAU2C,IAAI,aAC5BpD,EAAKM,UAAUG,UAAU2C,IAAI,aAC7BlD,SAASS,KAAKC,MAAMC,SAAW,SAC/BX,SAASmD,oBAAoB,UAAWtC,GACxCb,SAASmD,oBAAoB,QAASrC,GACtCU,QAAQC,IAAI,Q,CAGd,SAASX,EAAgBR,GACnBA,EAAMU,SAAWlB,EAAKI,UACxB+C,G,CAGJ,SAASpC,EAAcP,GACF,WAAfA,EAAM8C,MACRH,G,CA3EFI,YAAW,WACLC,EAAAC,sBACmBvD,SAASwD,eAAe,WAChC5C,iBAAiB,QAASP,E,GAExC,KAKLP,EAAKC,WAAWa,iBAAiB,QAASqC,E","sources":["src/js/modal-trailer.js"],"sourcesContent":["import { API_KEY, BASE_URL, ID_URL } from './api-vars';\nimport { renderHeroRandomFilm } from './header';\nimport axios from 'axios';\nimport { getMovieById3 } from './api-service';\n\nconst refs = {\n  closeModal: document.querySelector('.modal__close__btn'),\n  Backdrop: document.querySelector('.backdrop__trailer'),\n  trailerContainer: document.querySelector('.trailer__container'),\n  ModalCont: document.querySelector('.modal__container__trailer'),\n};\nlet filmsId = '';\n\n//перевірка на наявність кнопки\nfunction renderModalCheck() {\n  setTimeout(() => {\n    if (renderHeroRandomFilm) {\n      const watchTrailer = document.getElementById('trailer');\n      watchTrailer.addEventListener('click', onOpenModalTrailer);\n    }\n  }, 1000);\n}\n\nrenderModalCheck();\n\nrefs.closeModal.addEventListener('click', onCloseModalTrailer);\n\nfunction onOpenModalTrailer(event) {\n  refs.Backdrop.classList.remove('is-hidden');\n  refs.ModalCont.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', onEscBtnPress);\n  document.addEventListener('click', onBackdropClick);\n  const filmID = event.target.dataset.id;\n  filmsId = filmID;\n  createMarkup(filmID);\n  console.log(filmID);\n}\n\nfunction addMarkupTrailer(data) {\n  const id = data.id;\n  const searchTrailer = data.results.find(\n    element => element.name === 'Official Trailer'\n  );\n  console.log(searchTrailer);\n  console.log(data.id);\n  const trailerKey = searchTrailer.key;\n  console.log(trailerKey);\n  const URL = `https://www.youtube.com/embed/${trailerKey}`;\n  if (id) {\n    console.log(id);\n    return `<iframe class =\"trailer__iframe\" src=\"${URL}\"  frameborder=\"0\" allowfullscreen></iframe>`;\n  }\n}\n// // const TRAILER_URL = `${BASE_URL}/movie/{movie_id}/videos`;\n\nasync function createMarkup(filmID) {\n  const film = getMovieById3(filmID);\n  console.log(filmID + 'createMarkup');\n  console.log(film + 'film');\n  return film\n    .then(data => {\n      trailerMarkup = addMarkupTrailer(data);\n      refs.trailerContainer.innerHTML = trailerMarkup;\n      console.log(data);\n      return data;\n    })\n    .catch(error => {\n      console.log(error);\n      refs.trailerContainer.innerHTML = `<p>We are very sorry! But we couldn’t find the trailer.</p>\n     <div class = \"no_trailer\"></div>`;\n    });\n}\n\nfunction onCloseModalTrailer(event) {\n  refs.Backdrop.classList.add('is-hidden');\n  refs.ModalCont.classList.add('is-hidden');\n  document.body.style.overflow = 'scroll';\n  document.removeEventListener('keydown', onEscBtnPress);\n  document.removeEventListener('click', onBackdropClick);\n  console.log('click');\n}\n\nfunction onBackdropClick(event) {\n  if (event.target === refs.Backdrop) {\n    onCloseModalTrailer();\n  }\n}\nfunction onEscBtnPress(event) {\n  if (event.code === 'Escape') {\n    onCloseModalTrailer();\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$d553800bad3f6a6e$var$refs","closeModal","document","querySelector","Backdrop","trailerContainer","ModalCont","$d553800bad3f6a6e$var$onOpenModalTrailer","event","classList","remove","body","style","overflow","addEventListener","$d553800bad3f6a6e$var$onEscBtnPress","$d553800bad3f6a6e$var$onBackdropClick","filmID","target","dataset","id","$d553800bad3f6a6e$var$_createMarkup","apply","this","arguments","$d553800bad3f6a6e$var$createMarkup","console","log","$d553800bad3f6a6e$var$addMarkupTrailer","data","searchTrailer","results","find","element","name","trailerKey","key","URL","concat","$parcel$interopDefault","$2TvXO","mark","_callee","film","$1h2Gi","getMovieById3","then","trailerMarkup","innerHTML","catch","error","$d553800bad3f6a6e$var$onCloseModalTrailer","add","removeEventListener","code","setTimeout","$i8Q71","renderHeroRandomFilm","getElementById"],"version":3,"file":"index.7d5a6089.js.map"}