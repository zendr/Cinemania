{"mappings":"sgBAAAA,EAAA,S,8BAKA,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,sBACnCC,SAAUF,SAASC,cAAc,sBACjCE,iBAAkBH,SAASC,cAAc,uBACzCG,UAAWJ,SAASC,cAAc,+BAEpC,IAAII,EAAU,GAgBd,SAASC,EAAmBC,GAC1BT,EAAKI,SAASM,UAAUC,OAAO,aAC/BX,EAAKM,UAAUI,UAAUC,OAAO,aAChCT,SAASU,KAAKC,MAAMC,SAAW,SAC/BZ,SAASa,iBAAiB,UAAWC,GACrCd,SAASa,iBAAiB,QAASE,GACnC,MAAMC,EAAST,EAAMU,OAAOC,QAAQC,GACpCd,EAAUW,EAsBZI,eAA4BJ,IACb,EAAAK,EAAAC,eAAcN,GAExBO,MAAKC,IACJC,cArBN,SAA0BD,GACxB,MAAML,EAAKK,EAAKL,GACVO,EAAgBF,EAAKG,QAAQC,MACjCC,GAA4B,qBAAjBA,EAAQC,OAErBC,QAAQC,IAAIN,GACZK,QAAQC,IAAIR,EAAKL,IACjB,MAAMc,EAAaP,EAAcQ,IACjCH,QAAQC,IAAIC,GACZ,MAAME,EAAM,iCAAiCF,IAC7C,GAAId,EAEF,OADAY,QAAQC,IAAIb,GACL,yCAAyCgB,+C,CAS9BC,CAAiBZ,GACjC1B,EAAKK,iBAAiBkC,UAAYZ,cAClCM,QAAQC,IAAIR,GACLA,KAERc,OAAMC,IACLR,QAAQC,IAAIO,GACZzC,EAAKK,iBAAiBkC,UAAY,oGACF,G,CAjCpCG,CAAaxB,GACbe,QAAQC,IAAIhB,E,CAoCd,SAASyB,EAAoBlC,GAC3BT,EAAKI,SAASM,UAAUkC,IAAI,aAC5B5C,EAAKM,UAAUI,UAAUkC,IAAI,aAC7B1C,SAASU,KAAKC,MAAMC,SAAW,SAC/BZ,SAAS2C,oBAAoB,UAAW7B,GACxCd,SAAS2C,oBAAoB,QAAS5B,GACtCgB,QAAQC,IAAI,Q,CAGd,SAASjB,EAAgBR,GACnBA,EAAMU,SAAWnB,EAAKI,UACxBuC,G,CAGJ,SAAS3B,EAAcP,GACF,WAAfA,EAAMqC,MACRH,G,CAzEFI,YAAW,KACLC,EAAAC,sBACmB/C,SAASgD,eAAe,WAChCnC,iBAAiB,QAASP,E,GAExC,KAKLR,EAAKC,WAAWc,iBAAiB,QAAS4B,E","sources":["src/js/modal-trailer.js"],"sourcesContent":["import { API_KEY, BASE_URL, ID_URL } from './api-vars';\nimport { renderHeroRandomFilm } from './header';\nimport axios from 'axios';\nimport { getMovieById3 } from './api-service';\n\nconst refs = {\n  closeModal: document.querySelector('.modal__close__btn'),\n  Backdrop: document.querySelector('.backdrop__trailer'),\n  trailerContainer: document.querySelector('.trailer__container'),\n  ModalCont: document.querySelector('.modal__container__trailer'),\n};\nlet filmsId = '';\n\n//перевірка на наявність кнопки\nfunction renderModalCheck() {\n  setTimeout(() => {\n    if (renderHeroRandomFilm) {\n      const watchTrailer = document.getElementById('trailer');\n      watchTrailer.addEventListener('click', onOpenModalTrailer);\n    }\n  }, 1000);\n}\n\nrenderModalCheck();\n\nrefs.closeModal.addEventListener('click', onCloseModalTrailer);\n\nfunction onOpenModalTrailer(event) {\n  refs.Backdrop.classList.remove('is-hidden');\n  refs.ModalCont.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', onEscBtnPress);\n  document.addEventListener('click', onBackdropClick);\n  const filmID = event.target.dataset.id;\n  filmsId = filmID;\n  createMarkup(filmID);\n  console.log(filmID);\n}\n\nfunction addMarkupTrailer(data) {\n  const id = data.id;\n  const searchTrailer = data.results.find(\n    element => element.name === 'Official Trailer'\n  );\n  console.log(searchTrailer);\n  console.log(data.id);\n  const trailerKey = searchTrailer.key;\n  console.log(trailerKey);\n  const URL = `https://www.youtube.com/embed/${trailerKey}`;\n  if (id) {\n    console.log(id);\n    return `<iframe class =\"trailer__iframe\" src=\"${URL}\"  frameborder=\"0\" allowfullscreen></iframe>`;\n  }\n}\n// // const TRAILER_URL = `${BASE_URL}/movie/{movie_id}/videos`;\n\nasync function createMarkup(filmID) {\n  const film = getMovieById3(filmID);\n  return film\n    .then(data => {\n      trailerMarkup = addMarkupTrailer(data);\n      refs.trailerContainer.innerHTML = trailerMarkup;\n      console.log(data);\n      return data;\n    })\n    .catch(error => {\n      console.log(error);\n      refs.trailerContainer.innerHTML = `<p>We are very sorry! But we couldn’t find the trailer.</p>\n     <div class = \"no_trailer\"></div>`;\n    });\n}\n\nfunction onCloseModalTrailer(event) {\n  refs.Backdrop.classList.add('is-hidden');\n  refs.ModalCont.classList.add('is-hidden');\n  document.body.style.overflow = 'scroll';\n  document.removeEventListener('keydown', onEscBtnPress);\n  document.removeEventListener('click', onBackdropClick);\n  console.log('click');\n}\n\nfunction onBackdropClick(event) {\n  if (event.target === refs.Backdrop) {\n    onCloseModalTrailer();\n  }\n}\nfunction onEscBtnPress(event) {\n  if (event.code === 'Escape') {\n    onCloseModalTrailer();\n  }\n}\n"],"names":["parcelRequire","$08461d082de52db9$var$refs","closeModal","document","querySelector","Backdrop","trailerContainer","ModalCont","$08461d082de52db9$var$filmsId","$08461d082de52db9$var$onOpenModalTrailer","event","classList","remove","body","style","overflow","addEventListener","$08461d082de52db9$var$onEscBtnPress","$08461d082de52db9$var$onBackdropClick","filmID","target","dataset","id","async","$7me8F","getMovieById3","then","data","trailerMarkup","searchTrailer","results","find","element","name","console","log","trailerKey","key","URL","$08461d082de52db9$var$addMarkupTrailer","innerHTML","catch","error","$08461d082de52db9$var$createMarkup","$08461d082de52db9$var$onCloseModalTrailer","add","removeEventListener","code","setTimeout","$bUb57","renderHeroRandomFilm","getElementById"],"version":3,"file":"index.b347b710.js.map"}